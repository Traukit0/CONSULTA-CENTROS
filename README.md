# ðŸ“‘ Proyecto: Sistema de Consulta y FiscalizaciÃ³n de Centros de Cultivo

Este sistema permite registrar, consultar y gestionar inspecciones realizadas a centros de cultivo por parte de fiscalizadores de una instituciÃ³n pÃºblica.

Incluye:
- Backend en Flask + SQLAlchemy + Alembic + CORS
- Base de datos MySQL
- Adminer para exploraciÃ³n visual
- Frontend en React + Vite
- Docker + Docker Compose para despliegue

---

## âš¡ TecnologÃ­as utilizadas

- Python 3.10+
- Flask
- Flask-CORS
- SQLAlchemy
- Alembic
- MySQL 8
- Adminer
- Docker / Docker Compose
- React
- Vite
- Nginx (para servir frontend en producciÃ³n)

---

## â™» Estructura del proyecto

```
INTERFAZ GRAFICA CONSULTA CENTROS/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ alembic/
â”‚   â”œâ”€â”€ database.py
â”‚   â”œâ”€â”€ app.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â””â”€â”€ README.md
```

---

## ðŸ”„ InstalaciÃ³n y uso

### Entorno de desarrollo

Para desarrollo, es recomendable ejecutar el frontend directamente en la mÃ¡quina local y el backend en Docker:

1. Clonar el proyecto y entrar a la carpeta:
   ```bash
   git clone <repo-url>
   cd INTERFAZ GRAFICA CONSULTA CENTROS
   ```

2. Iniciar el backend y base de datos con Docker:
   ```bash
   docker compose up -d db backend adminer
   ```

3. Ejecutar las migraciones Alembic:
   ```bash
   docker compose exec backend bash
   alembic upgrade head
   ```

4. Iniciar el frontend en desarrollo:
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

5. Acceder a las distintas interfaces:
   - Adminer: [http://localhost:8080](http://localhost:8080)
   - API/backend: [http://localhost:8000](http://localhost:8000)
   - Frontend (desarrollo): [http://localhost:5173](http://localhost:5173)

### Entorno de producciÃ³n

Para producciÃ³n, se recomienda usar Docker Compose para todos los servicios:

1. Construir y levantar todos los contenedores:
   ```bash
   docker compose build
   docker compose up -d
   ```

2. Acceder a las distintas interfaces:
   - Adminer: [http://localhost:8080](http://localhost:8080)
   - API/backend: [http://localhost:8000](http://localhost:8000)
   - Frontend (producciÃ³n): [http://localhost:3000](http://localhost:3000)

### ðŸ”„ Flujo de trabajo diario

Este es el flujo de trabajo recomendado para el desarrollo dÃ­a a dÃ­a:

#### Iniciar sesiÃ³n de desarrollo
1. Inicia Docker Desktop en tu mÃ¡quina Windows
2. Desde la terminal, en la raÃ­z del proyecto, levanta los servicios de backend:
   ```bash
   docker compose up -d db backend adminer
   ```
3. En una terminal separada, inicia el servidor de desarrollo del frontend:
   ```bash
   cd frontend
   npm run dev
   ```
4. Trabaja con el frontend accediendo a [http://localhost:5173](http://localhost:5173)
5. Todos los cambios que realices se reflejarÃ¡n automÃ¡ticamente gracias al hot-reloading

#### Probar versiÃ³n de producciÃ³n
Cuando quieras verificar cÃ³mo se verÃ¡ tu trabajo en producciÃ³n:

1. Construye la versiÃ³n de producciÃ³n del frontend:
   ```bash
   cd frontend
   npm run build
   ```
2. Reconstruye y reinicia el contenedor de frontend:
   ```bash
   # Desde la raÃ­z del proyecto
   docker compose build frontend
   docker compose up -d frontend
   ```
3. Visualiza la versiÃ³n de producciÃ³n en [http://localhost:3000](http://localhost:3000)

#### Terminar sesiÃ³n de desarrollo
Al finalizar tu sesiÃ³n de trabajo:

1. DetÃ©n el servidor de desarrollo de Vite con `Ctrl+C`
2. Si lo deseas, puedes detener los contenedores:
   ```bash
   docker compose down
   ```

---

## ðŸ–¥ Frontend en React + Vite

Este proyecto utiliza **React** como framework de interfaz y **Vite** como herramienta de desarrollo y empaquetado.

### Flujo de trabajo recomendado

#### Desarrollo
- Ejecuta el frontend con `npm run dev` directamente en tu mÃ¡quina local
- Vite usa el puerto 5173 por defecto para servir la aplicaciÃ³n
- Beneficios: Hot-reloading mÃ¡s rÃ¡pido y mejor experiencia de debugging

#### ProducciÃ³n
- Construye el frontend con `npm run build`
- La aplicaciÃ³n se sirve a travÃ©s de Nginx en el puerto 3000 (configurable)
- El contenedor Docker incluye la configuraciÃ³n necesaria para el despliegue

```
frontend/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â””â”€â”€ App.jsx
â”œâ”€â”€ Dockerfile
â””â”€â”€ vite.config.js
```

---

## ðŸ”Œ ComunicaciÃ³n API-Frontend

El backend utiliza Flask-CORS para permitir la comunicaciÃ³n desde el frontend. Esta configuraciÃ³n estÃ¡ implementada en `app.py`:

```python
from flask import Flask
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # Habilitar CORS para toda la aplicaciÃ³n
```

Esto permite que el frontend (en localhost:5173 o localhost:3000) pueda hacer peticiones a la API (localhost:8000) sin problemas de CORS.

---

## ðŸ“ƒ DocumentaciÃ³n

Consulta el checklist completo para despliegue en:
- [`checklist_despliegue.md`](./checklist_despliegue.md)

---

## ðŸš€ En desarrollo futuro...
- CreaciÃ³n de endpoints RESTful
- AutenticaciÃ³n y autorizaciÃ³n de usuarios
- Subida de documentos de inspecciones
- VisualizaciÃ³n de reportes e histÃ³ricos

---

## âœ‰ Contacto
Autor: @Traukit0  
Licencia: MIT (o la que definas mÃ¡s adelante)
